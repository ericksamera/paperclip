{% extends "base.html" %}
{% block title %}Collections · Paperclip{% endblock %}

{% block content %}
<div class="panel">
  <div class="panel__title">Collections</div>
  <div class="panel__body">
    <form class="row" method="post" action="{{ url_for('collections_create') }}">
      <input class="search__input" name="name" placeholder="New collection name" />
      <button class="btn btn--primary" type="submit">Create</button>
      <a class="btn" href="{{ url_for('library') }}">Back to Library</a>
    </form>

    <div class="table-wrap" style="margin-top:12px;">
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Count</th>
            <th>Export</th>
            <th>Rename</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          {% for c in collections %}
            <tr>
              <td>
                <a href="{{ url_for('library', col=c.id) }}">{{ c.name }}</a>
              </td>
              <td class="small">{{ c.count }}</td>
              <td class="small">
                <a href="{{ url_for('export_bibtex', col=c.id) }}">BibTeX</a>
                ·
                <a href="{{ url_for('export_ris', col=c.id) }}">RIS</a>
              </td>
              <td>
                <form method="post" action="{{ url_for('collections_rename', collection_id=c.id) }}" class="row">
                  <input name="name" value="{{ c.name }}" class="search__input" />
                  <button class="btn" type="submit">Rename</button>
                </form>
              </td>
              <td>
                <form method="post" action="{{ url_for('collections_delete', collection_id=c.id) }}"
                      onsubmit="return confirm('Delete collection & remove membership?');">
                  <button class="btn btn--danger" type="submit">Delete</button>
                </form>
              </td>
            </tr>
          {% endfor %}
          {% if collections|length == 0 %}
            <tr><td colspan="5" class="muted">No collections yet.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
